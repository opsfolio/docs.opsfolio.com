---
title: rb
description: Complete reference for spry runbook command-line tools
icon: BookOpen
---

import { Tabs, Tab } from 'fumadocs-ui/components/tabs';
import { Callout } from 'fumadocs-ui/components/callout';

## Runbook Commands
Spry Runbook (`rb`) Commands provide the interface for executing tasks and running workflows in Spry.

### Root Command

```bash
spry rb [OPTIONS]
spry rb [COMMAND] [OPTIONS]
```
**Options:**

  `-h`, `--help`  - Show this help. 

### Commands
#### `ls` - List code cells (tasks) in markdown documents.

```bash
spry rb ls [OPTIONS] [PATHS...]
```
**Arguments:**
- `PATHS` - Path(s) to Markdown file(s) (defaults to `Spryfile.md`)

**Options:**
- `--no-color` - Show output without using ANSI colors

**Examples:**

<Tabs items={['Basic', 'Specific File', 'Multiple Files', 'No Color']}>
  <Tab value="Basic">
    ```bash
    spry rb ls
    ```
    List all tasks in the current directory.
  </Tab>
  <Tab value="Specific File">
    ```bash
    spry rb ls Spryfile.md
    ```
    List tasks from a specific file.
  </Tab>
  <Tab value="Multiple Files">
    ```bash
    spry rb ls *.md
    ```
    List tasks from all markdown files.
  </Tab>
  <Tab value="No Color">
    ```bash
    spry rb ls --no-color
    ```
    Output without ANSI colors.
  </Tab>
</Tabs>

---

**Engine Types:**
| Engine | Description |
|--------|-------------|
| `shebang` | Executable via shebang (shell scripts, python, etc.) |
| `deno-task` | Deno task runner |
| `using:<name>` | External reference to a catalog-defined resource |

#### `task` - Execute a specific cell and its dependencies.

```bash
spry rb task [OPTIONS] <TASK_ID> [PATHS...]
```
**Arguments:**
- `TASK_ID` - The task identity to execute
- `PATHS` - Path(s) to Markdown file(s)

**Arguments:**
- `TASK_ID` - The task identity to execute
- `PATHS` - Path(s) to Markdown file(s)

**Options:**
| Option | Description |
|--------|-------------|
| `--verbose <style>` | Emit information messages verbosely (plain, rich, markdown) |
| `--summarize` | Emit summary after execution in JSON |

**Examples:**

<Tabs items={['Basic', 'Verbose', 'Summary', 'Combined']}>
  <Tab value="Basic">
    ```bash
    spry rb task task-1
    ```
    Run a specific task.
  </Tab>
  <Tab value="Verbose">
    ```bash
    spry rb task task-1 --verbose rich
    ```
    Run with detailed colored output.
  </Tab>
  <Tab value="Summary">
    ```bash
    spry rb task task-1 --summarize
    ```
    Run with JSON summary of results.
  </Tab>
  <Tab value="Combined">
    ```bash
    spry rb task task-1 --verbose rich --summarize
    ```
    Run with all options enabled.
  </Tab>
</Tabs>

---

#### `run` - Execute all code cells in markdown documents as a DAG (Directed Acyclic Graph).

```bash
spry rb run [OPTIONS] [PATHS...]
```
**Arguments:**
- `PATHS` - Path(s) to Markdown file(s)

**Options:**

- `-h, --help` - Show help information
- `--verbose <style>` - Emit information messages verbosely
  - `plain` - Plain text output
  - `rich` - Colorized/formatted output
  - `markdown` - Markdown formatted output
- `--graph <name>` - Run only nodes in provided graph(s)
- `--summarize` - Emit summary after execution in JSON format
- `--visualize <style>` - Visualize the DAG before/during execution
  - `ascii-tree` - Tree structure diagram
  - `ascii-workflow` - Workflow sequence diagram
  - `ascii-flowchart` - Detailed flowchart format
  - `mermaid-js` - Mermaid graph syntax

**Examples:**

<Tabs items={['Basic', 'Verbose', 'Graphs', 'Visualization', 'Advanced']}>
  <Tab value="Basic">
    ```bash
    # Run all tasks in order
    spry rb run

    # Run from specific file
    spry rb run Spryfile.md
    ```
  </Tab>
  <Tab value="Verbose">
    ```bash
    # Plain text output
    spry rb run --verbose plain

    # Colored detailed output
    spry rb run --verbose rich

    # Markdown formatted output
    spry rb run --verbose markdown
    ```
  </Tab>
  <Tab value="Graphs">
    ```bash
    # Run only Graph A tasks
    spry rb run --graph A

    # Run Graphs A and B
    spry rb run --graph "A,B"
    ```
  </Tab>
  <Tab value="Visualization">
    ```bash
    # Show task tree structure
    spry rb run --visualize ascii-tree

    # Show workflow sequence
    spry rb run --visualize ascii-workflow

    # Show detailed flowchart
    spry rb run --visualize ascii-flowchart

    # Show Mermaid diagram
    spry rb run --visualize mermaid-js
    ```
  </Tab>
  <Tab value="Advanced">
    ```bash
    # JSON execution summary
    spry rb run --summarize

    # Output with visualization
    spry rb run --verbose rich --visualize ascii-workflow

    # Save execution log
    spry rb run --verbose rich --summarize > execution.json
    ```
  </Tab>
</Tabs>

---

#### `issues` - Display any issues (errors, warnings, etc.) in the mdast nodes.

```bash
spry rb issues [PATHS...]
```

**Arguments:**
- `PATHS` - Path(s) to Markdown file(s)


**What It Detects:**

- Malformed code block syntax
- Invalid task IDs
- Circular dependencies
- Missing task references
- Duplicate task names
- Syntax errors

**Examples:**

```bash
# Check current file
spry rb issues

# Check specific file
spry rb issues Spryfile.md

# Check all markdown files
spry rb issues *.md
```

**Output:**

**No Issues:**
```
✓ No issues found
```

**With Issues:**
```
Spryfile.md:
  Line 42: ERROR - Circular dependency: task-a → task-b → task-a
  Line 58: WARNING - Undefined task reference 'missing-task'
  Line 75: ERROR - Missing language specifier in code block
```

**Usage Patterns:**

1. Validate Before Running

```bash
spry rb issues && spry rb run
```

2. In Scripts

```bash
if spry rb issues > /dev/null; then
  echo "Ready to run"
  spry rb run
else
  echo "Fix issues first"
fi
```

<Callout type="info">
  Always run `spry rb issues` before executing tasks to catch potential problems early.
</Callout>

---

#### `report` - Execute all code cells and return as new markdown with outputs embedded.

```bash
spry rb report [OPTIONS] [PATHS...]
```
**Arguments:**
- `PATHS` - Path(s) to Markdown file(s)

**Options:**
| Option | Description |
|--------|-------------|
| `--graph <name>` | Run only the nodes in provided graph(s). May be repeated. |

**Examples:**

```bash
# Generate report from current directory
spry rb report

# Generate report from specific file
spry rb report Spryfile.md

# Generate reports from multiple files
spry rb report *.md

# Generate reports and save the response to a file
spry rb report file.md > executed-runbook.md
```

##### Output Example

**Before:**
````markdown
```bash
echo "Hello"
```
````

**After:**
````markdown
```bash
echo "Hello"
```
```output
Hello
```
````

<Callout type="warn">
  The `report` command will execute all code cells. Ensure your code is safe to run before generating reports.
</Callout>

### File Sources

All commands that accept file paths support:

1. **Local file system paths**: `./Spryfile.md`, `/path/to/file.md`
2. **Default behavior**: If no path is provided, uses `Spryfile.md` in the current directory
3. **Multiple sources**: Some commands support multiple file paths